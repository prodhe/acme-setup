#!/bin/sh

function usage {
	echo "usage: clu <lang> <search>"
	exit
}

if [ -z "$1" ] || [ -z "$2" ]; then
	usage
fi

case "$1" in
"css")
	URL="https://developer.mozilla.org/en-US/docs/Web/CSS/"
	PARSE="/<article/,/<\/article>/p"
	RUN="curl -s $URL$2 | sed -n \"$PARSE\""

	eval $RUN | \
	pandoc -t plain -f html  | \
	plumb -i -d edit -a "action=showdata filename=""$dir""/clu/css/"$2" "
	;;
"html")
	URL="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/"
	PARSE="/<article/,/<\/article>/p"
	RUN="curl -s $URL$2 | sed -n \"$PARSE\""

	eval $RUN | \
	pandoc -t plain -f html  | \
	plumb -i -d edit -a "action=showdata filename=""$dir""/clu/html/"$2" "
	;;
	
*)
	echo "unsupported language"
	usage
	;;
esac
